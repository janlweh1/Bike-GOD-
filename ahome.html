<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BikeRental - User Profile</title>
    <link rel="stylesheet" href="ahome.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="10" cy="22" r="4" stroke="#22d3ee" stroke-width="2.5"/>
                    <circle cx="22" cy="22" r="4" stroke="#22d3ee" stroke-width="2.5"/>
                    <path d="M16 8L10 22M16 8L22 22" stroke="#22d3ee" stroke-width="2.5" stroke-linecap="round"/>
                    <line x1="10" y1="22" x2="22" y2="22" stroke="#22d3ee" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span class="logo-text">BikeRental</span>
            </div>
            <ul class="nav-menu">
                <li><a href="user_home.html">Home</a></li>
                <li><a href="2browse.html">Browse Bikes</a></li>
                <li><a href="ahowitworks.html">How It Works</a></li>
                <li><a href="apricing.html">Pricing</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="my_rental.html">My Rentals</a></li>
                <li><a href="ahome.html" class="active">Profile</a></li>
                <li><button id="logout-btn" class="logout-btn">Logout</button></li>
            </ul>
        </div>
    </nav>

    <!-- Profile Header -->
    <section class="profile-header">
        <div class="profile-header-container">
            <div class="profile-avatar-wrapper">
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop" alt="Profile Picture" class="profile-avatar">
                <div class="avatar-edit-badge">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 13L9 17L19 7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
            <div class="profile-info">
                <h1 class="profile-name">John Anderson</h1>
                <p class="profile-email">john.anderson@email.com</p>
                <div class="profile-badges">
                    <span class="badge badge-primary">Gold Member</span>
                    <span class="badge badge-secondary">Member since January 2024</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Profile Tabs -->
    <section class="profile-content">
        <div class="profile-content-container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="overview">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Overview
                </button>
                <button class="tab-btn" data-tab="general">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M6 21V19C6 16.7909 7.79086 15 10 15H14C16.2091 15 18 16.7909 18 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    General
                </button>
                <button class="tab-btn" data-tab="security">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Security
                </button>
            </div>

            <!-- Overview Tab -->
            <div class="tab-content active" id="overview">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon cyan-bg">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="8" cy="16" r="3" stroke="#22d3ee" stroke-width="2"/>
                                <circle cx="16" cy="16" r="3" stroke="#22d3ee" stroke-width="2"/>
                                <path d="M12 6L8 16M12 6L16 16" stroke="#22d3ee" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-value">24</h3>
                            <p class="stat-label">Total Rides</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon blue-bg">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="#6366f1" stroke-width="2"/>
                                <path d="M12 6V12L16 14" stroke="#6366f1" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-value">87</h3>
                            <p class="stat-label">Total Hours</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon green-bg">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="#10b981" stroke-width="2"/>
                                <path d="M12 6V12M12 12H16" stroke="#10b981" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-value">$456</h3>
                            <p class="stat-label">Total Spent</p>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <h2 class="section-title">Recent Activity</h2>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12" r="10" stroke="#22d3ee" stroke-width="2"/>
                                    <path d="M12 6V12L16 14" stroke="#22d3ee" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <div class="activity-details">
                                <h4 class="activity-title">Rented Mountain Pro X1</h4>
                                <p class="activity-date">2025-01-15</p>
                            </div>
                            <div class="activity-duration">4 hours</div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12" r="10" stroke="#22d3ee" stroke-width="2"/>
                                    <path d="M12 6V12L16 14" stroke="#22d3ee" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <div class="activity-details">
                                <h4 class="activity-title">Rented City Cruiser</h4>
                                <p class="activity-date">2025-01-12</p>
                            </div>
                            <div class="activity-duration">2 hours</div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12" r="10" stroke="#22d3ee" stroke-width="2"/>
                                    <path d="M12 6V12L16 14" stroke="#22d3ee" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <div class="activity-details">
                                <h4 class="activity-title">Rented E-Bolt 3000</h4>
                                <p class="activity-date">2025-01-10</p>
                            </div>
                            <div class="activity-duration">3 hours</div>
                        </div>

                        <div class="activity-item">
                            <div class="activity-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="8" r="4" stroke="#22d3ee" stroke-width="2"/>
                                    <path d="M6 21V19C6 16.7909 7.79086 15 10 15H14C16.2091 15 18 16.7909 18 19V21" stroke="#22d3ee" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="activity-details">
                                <h4 class="activity-title">Profile updated</h4>
                                <p class="activity-date">2025-01-08</p>
                            </div>
                            <div class="activity-duration">-</div>
                        </div>
                    </div>
                    <button class="view-more-btn">View Full History â†’</button>
                </div>
            </div>

            <!-- General Tab -->
            <div class="tab-content" id="general">
                <div class="settings-section">
                    <h2 class="section-title">Personal Information</h2>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-input" id="fullNameInput" value="John Anderson">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-input" value="+1 (555) 234-5678">
                        </div>

                        <div class="form-group full-width">
                            <label class="form-label">Address</label>
                            <input type="text" class="form-input" value="456 Oak Avenue, San Francisco, CA 94102">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Date of Birth</label>
                            <input type="date" class="form-input" value="1990-05-15">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Emergency Contact</label>
                            <input type="tel" class="form-input" value="+1 (555) 987-6543">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="saveGeneralChanges()">Save Changes</button>
                        <button class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Security Tab -->
            <div class="tab-content" id="security">
                <div class="settings-section">
                    <h2 class="section-title">Profile Photo</h2>
                    <p class="section-description">Upload a new profile photo</p>
                    
                    <div class="info-card">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop" alt="Profile" class="profile-photo-preview">
                        <div class="info-content">
                            <p class="info-label">Current Photo</p>
                            <p class="info-value" style="font-size: 0.9rem;">JPG, PNG or GIF. Max 5MB</p>
                        </div>
                        <button class="btn btn-outline" onclick="document.getElementById('photoUpload').click()">Upload New Photo</button>
                        <input type="file" id="photoUpload" accept="image/*" style="display: none;">
                    </div>
                </div>

                <div class="settings-section">
                    <h2 class="section-title">Email Address</h2>
                    <p class="section-description">Manage your email address for account access</p>
                    
                    <div class="info-card">
                        <div class="info-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="5" width="18" height="14" rx="2" stroke="#22d3ee" stroke-width="2"/>
                                <path d="M3 7L12 13L21 7" stroke="#22d3ee" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="info-content">
                            <p class="info-label">Current Email</p>
                            <p class="info-value" id="currentEmailDisplay">john.anderson@email.com</p>
                        </div>
                        <button class="btn btn-outline" onclick="openEmailModal()">Change Email</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h2 class="section-title">Password</h2>
                    <p class="section-description">Keep your account secure with a strong password</p>
                    
                    <div class="info-card">
                        <div class="info-icon green-bg">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="#10b981" stroke-width="2"/>
                                <path d="M9 12L11 14L15 10" stroke="#10b981" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="info-content">
                            <p class="info-label">Password last changed</p>
                            <p class="info-value">December 28, 2024</p>
                        </div>
                        <button class="btn btn-outline" onclick="openPasswordModal()">Change Password</button>
                    </div>

                    <div class="security-tips">
                        <div class="tips-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="#6366f1" stroke-width="2"/>
                                <path d="M12 16V12M12 8H12.01" stroke="#6366f1" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="tips-content">
                            <p class="tips-title">Password Security Tips:</p>
                            <ul class="tips-list">
                                <li>Use at least 8 characters</li>
                                <li>Include uppercase and lowercase letters</li>
                                <li>Add numbers and special characters</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Email Change Modal -->
    <div id="emailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Change Email Address</h2>
                <button class="modal-close" onclick="closeEmailModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">Manage your email address for account access</p>
                
                <div class="form-group">
                    <label class="form-label">Current Email</label>
                    <input type="email" class="form-input" id="currentEmail" value="john.anderson@email.com" readonly>
                </div>

                <div class="form-group">
                    <label class="form-label">New Email Address</label>
                    <input type="email" class="form-input" id="newEmail" placeholder="Enter new email address">
                </div>

                <div class="form-group">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" class="form-input" id="emailConfirmPassword" placeholder="Enter your password to confirm">
                    <p class="form-hint">For security, please confirm your password to change your email</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="updateEmail()">Update Email</button>
                <button class="btn btn-secondary" onclick="closeEmailModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Password Change Modal -->
    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Change Password</h2>
                <button class="modal-close" onclick="closePasswordModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-description">Keep your account secure with a strong password</p>
                
                <div class="form-group">
                    <label class="form-label">Current Password</label>
                    <input type="password" class="form-input" id="currentPassword" placeholder="Enter current password">
                </div>

                <div class="form-group">
                    <label class="form-label">New Password</label>
                    <input type="password" class="form-input" id="newPassword" placeholder="Enter new password">
                    <p class="form-hint">Must be at least 8 characters long</p>
                </div>

                <div class="form-group">
                    <label class="form-label">Confirm New Password</label>
                    <input type="password" class="form-input" id="confirmNewPassword" placeholder="Confirm new password">
                </div>

                <div class="security-tips" style="margin-top: 1rem;">
                    <div class="tips-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="#6366f1" stroke-width="2"/>
                            <path d="M12 16V12M12 8H12.01" stroke="#6366f1" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="tips-content">
                        <p class="tips-title">Password Security Tips:</p>
                        <ul class="tips-list">
                            <li>Use at least 8 characters</li>
                            <li>Include uppercase and lowercase letters</li>
                            <li>Add numbers and special characters</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="updatePassword()">Update Password</button>
                <button class="btn btn-secondary" onclick="closePasswordModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tabName = btn.getAttribute('data-tab');
                
                // Remove active class from all tabs and contents
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                btn.classList.add('active');
                document.getElementById(tabName).classList.add('active');
            });
        });

        // Save General Changes - Update Name in Profile Header
        function saveGeneralChanges() {
            const fullNameInput = document.getElementById('fullNameInput');
            const newName = fullNameInput.value.trim();
            
            if (newName) {
                // Update profile name in header
                document.querySelector('.profile-name').textContent = newName;
                alert('Profile updated successfully!');
            } else {
                alert('Please enter a valid name');
            }
        }

        // Email Modal Functions
        function openEmailModal() {
            document.getElementById('emailModal').style.display = 'flex';
        }

        function closeEmailModal() {
            document.getElementById('emailModal').style.display = 'none';
            // Clear form
            document.getElementById('newEmail').value = '';
            document.getElementById('emailConfirmPassword').value = '';
        }

        function updateEmail() {
            const newEmail = document.getElementById('newEmail').value;
            const password = document.getElementById('emailConfirmPassword').value;
            
            if (!newEmail || !password) {
                alert('Please fill in all fields');
                return;
            }

            // Simple email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(newEmail)) {
                alert('Please enter a valid email address');
                return;
            }

            // Update email displays
            document.getElementById('currentEmail').value = newEmail;
            document.getElementById('currentEmailDisplay').textContent = newEmail;
            document.querySelector('.profile-email').textContent = newEmail;
            
            alert('Email updated successfully!');
            closeEmailModal();
        }

        // Password Modal Functions
        function openPasswordModal() {
            document.getElementById('passwordModal').style.display = 'flex';
        }

        function closePasswordModal() {
            document.getElementById('passwordModal').style.display = 'none';
            // Clear form
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
        }

        function updatePassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmNewPassword').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                alert('Please fill in all fields');
                return;
            }

            if (newPassword.length < 8) {
                alert('Password must be at least 8 characters long');
                return;
            }

            if (newPassword !== confirmPassword) {
                alert('New passwords do not match');
                return;
            }

            // Update password last changed date
            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const passwordDateElements = document.querySelectorAll('.info-card .info-value');
            passwordDateElements.forEach(el => {
                if (el.textContent.includes('December') || el.textContent.includes('2024')) {
                    el.textContent = today;
                }
            });
            
            alert('Password updated successfully!');
            closePasswordModal();
        }

        // Profile Photo Upload
        document.getElementById('photoUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size must be less than 5MB');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(event) {
                    // Update all profile images
                    document.querySelector('.profile-avatar').src = event.target.result;
                    document.querySelector('.profile-photo-preview').src = event.target.result;
                    alert('Profile photo updated successfully!');
                };
                reader.readAsDataURL(file);
            }
        });

        // Close modals when clicking outside
        window.onclick = function(event) {
            const emailModal = document.getElementById('emailModal');
            const passwordModal = document.getElementById('passwordModal');
            
            if (event.target === emailModal) {
                closeEmailModal();
            }
            if (event.target === passwordModal) {
                closePasswordModal();
            }
        }
    </script>

    <script src="logout.js"></script>
</body>
</html>