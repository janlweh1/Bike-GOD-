<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rentals - Bike Rental Management System</title>
    <link rel="stylesheet" href="rentals.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <h2>BikeRental</h2>
        </div>
        <nav class="nav-menu">
            <a href="dashboard.html" class="nav-item">
                <span class="icon"><img src="dashboard.png"></span>
                <span>Dashboard</span>
            </a>
            <a href="1.html" class="nav-item">
                <span class="icon"><img src="bike-moving.png"></span>
                <span>Bikes</span>
            </a>
            <a href="customers.html" class="nav-item">
                <span class="icon"><img src="users.png"></span>
                <span>Customers</span>
            </a>
            <a href="rentals.html" class="nav-item active">
                <span class="icon"><img src="list.png"></span>
                <span>Rentals</span>
            </a>
            <a href="payments.html" class="nav-item">
                <span class="icon"><img src="wallet-arrow.png"></span>
                <span>Payments</span>
            </a>
            <a href="settings.html" class="nav-item">
                <span class="icon"><img src="settings.png"></span>
                <span>Settings</span>
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search rentals by ID, customer, or bike...">
            </div>
            <div class="header-right">
                <button class="notification-btn"><img src="bell.png"></button>
                <a href="settings.html" class="user-profile">
                    <img src="profuser.png" alt="User Profile">
                    <span>Admin</span>
                </a>
            </div>
        </header>

        <!-- Rentals Content -->
        <div class="rentals-content">
            <div class="page-header">
                <h1>Rental Management</h1>  
            </div>

            <!-- Stats Summary -->
            <div class="stats-summary">
                <div class="stat-box active">
                    <div class="stat-icon"><span class="icon"><img src="list.png"></span></div>
                    <div class="stat-info">
                        <h3>Active Rentals</h3>
                        <div class="number" id="activeCount">0</div>
                        <span class="stat-trend">Currently ongoing</span>
                    </div>
                </div>
                <div class="stat-box completed">
                    <div class="stat-icon"><span class="icon"><img src="check-box.png"></span></div>
                    <div class="stat-info">
                        <h3>Completed Today</h3>
                        <div class="number" id="completedTodayCount">0</div>
                        <span class="stat-trend positive" id="completedTrend">Today</span>
                    </div>
                </div>
                <div class="stat-box overdue">
                    <div class="stat-icon"><span class="icon"><img src="danger.png"></span></div>
                    <div class="stat-info">
                        <h3>Overdue</h3>
                        <div class="number" id="overdueCount">0</div>
                        <span class="stat-trend negative">Needs attention</span>
                    </div>
                </div>
                <div class="stat-box revenue">
                    <div class="stat-icon"><span class="icon"><img src="profit.png"></span></div>
                    <div class="stat-info">
                        <h3>Today's Revenue</h3>
                        <div class="number" id="todayRevenue">â‚±0</div>
                        <span class="stat-trend positive">From completed rentals</span>
                    </div>
                </div>
            </div>

            <!-- Filter Section -->
            <div class="filter-section">
                <div class="filter-controls">
                    <div class="filter-group">
                        <label>Status</label>
                        <select id="filterStatus">
                            <option value="">All Status</option>
                            <option value="pending">Pending</option>
                            <option value="active">Active</option>
                            <option value="completed">Completed</option>
                            <option value="overdue">Overdue</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Date Range</label>
                        <select id="filterDate">
                            <option value="">All Time</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Bike Type</label>
                        <select id="filterBikeType">
                            <option value="">All Types</option>
                            <option value="city">City</option>
                            <option value="mountain">Mountain</option>
                            <option value="electric">Electric</option>
                            <option value="kids">Kids</option>
                            <option value="premium">Premium</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Sort By</label>
                        <select id="filterSort">
                            <option value="recent">Most Recent</option>
                            <option value="oldest">Oldest First</option>
                            <option value="return-date">Return Date</option>
                            <option value="amount">Highest Amount</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Rentals Table -->
            <div class="table-container">
                <div class="table-header">
                    <h2>All Rentals</h2>
                    <div class="table-actions">
                        <button class="add-payment-btn" id="refreshRentalsBtn" style="margin-right:8px;">Refresh</button>
                        <span id="rentalsFetchInfo" style="color:#64748b;font-size:12px;"></span>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>
                                <input type="checkbox" id="selectAll">
                            </th>
                            <th>Rental ID</th>
                            <th>Customer</th>
                            <th>Bike</th>
                            <th>Start Date</th>
                            <th>Start Time</th>
                            <th>Return Time</th>
                            <th>Duration</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="rentalTableBody">
                        <tr>
                            <td colspan="11" style="text-align: center; padding: 3rem; color: #64748b;">
                                Loading rentals...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- View Details Modal -->
    <div id="viewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Rental Details</h2>
                <button class="close-btn" onclick="closeModal('viewModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="detail-section">
                    <h3>Rental Information</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">Rental ID</span>
                            <span class="detail-value" id="viewRentalId"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Status</span>
                            <span class="detail-value" id="viewStatus"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Pickup Date</span>
                            <span class="detail-value" id="viewStartDate"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Pickup Time</span>
                            <span class="detail-value" id="viewStartTime"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Return Time</span>
                            <span class="detail-value" id="viewReturnTime"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Duration</span>
                            <span class="detail-value" id="viewDuration"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Amount</span>
                            <span class="detail-value" id="viewAmount"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Location</span>
                            <span class="detail-value" id="viewLocation"></span>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>Customer Information</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">Customer Name</span>
                            <span class="detail-value" id="viewCustomer"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Email</span>
                            <span class="detail-value" id="viewEmail"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Phone</span>
                            <span class="detail-value" id="viewPhone"></span>
                        </div>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>Bike Information</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">Bike Model</span>
                            <span class="detail-value" id="viewBikeModel"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Bike Category</span>
                            <span class="detail-value" id="viewBikeCategory"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal('viewModal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Complete Rental Confirmation Modal -->
    <div id="completeModal" class="modal complete-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Complete Rental</h2>
                <button class="close-btn" onclick="closeModal('completeModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="complete-icon">
                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                </div>
                <div class="complete-message">
                    <h3>Complete This Rental?</h3>
                    <p>Confirm that the bike has been returned and the rental is complete.</p>
                </div>
                <div class="rental-summary">
                    <div class="summary-row">
                        <span>Rental ID:</span>
                        <span id="completeRentalId"></span>
                    </div>
                    <div class="summary-row">
                        <span>Customer:</span>
                        <span id="completeCustomer"></span>
                    </div>
                    <div class="summary-row">
                        <span>Bike:</span>
                        <span id="completeBike"></span>
                    </div>
                    <div class="summary-row">
                        <span>Total Amount:</span>
                        <span id="completeAmount"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal('completeModal')">Cancel</button>
                <button class="btn btn-success" onclick="confirmComplete()">Complete Rental</button>
            </div>
        </div>
    </div>

    <script src="rentals.js"></script>
    <!-- Role label updater -->
    <script src="admin-header.js"></script>
</body>
</html>